{%- liquid
  assign heading = section.settings.heading
  assign image = product.metafields.custom.rkwo_product_callouts_image
  assign section_id = section.id
-%}

{% if product.metafields.custom.rkwo_product_callouts_heading_1 %}
<section class="rkwo-product-callouts" id="section-{{ section_id }}">
  <!-- Left Side -->
  <div class="rkwo-product-callouts-content">
    <div>
      {%- if heading != blank -%}
          <h2 class="rkwo-product-callouts-content-heading rkwo-aequil-heading">
            {% assign words = heading | split: ' ' %}
            {% if words.size > 1 %}
              {% assign last_index = words.size | minus: 1 %}
              {% assign first_words = words | slice: 0, last_index %}
              {{ first_words | join: ' ' }} <span>{{ words[last_index] }}</span>
            {% else %}
              {{ heading }}
            {% endif %}
          </h2>
        {%- endif -%}

          <div class="rkwo-product-callouts-content-content">

              <div class="rkwo-product-callouts-point">
                {% if product.metafields.custom.rkwo_product_callouts_heading_1 %}
                  <h3 class="rkwo-product-callouts-point-heading">{{ product.metafields.custom.rkwo_product_callouts_heading_1 }}</h3>
                {%- endif -%}
                {% if product.metafields.custom.rkwo_product_callouts_heading_2 %}
                  <h3 class="rkwo-product-callouts-point-heading">{{ product.metafields.custom.rkwo_product_callouts_heading_2 }}</h3>
                {%- endif -%}
                {% if product.metafields.custom.rkwo_product_callouts_heading_3 %}
                  <h3 class="rkwo-product-callouts-point-heading">{{ product.metafields.custom.rkwo_product_callouts_heading_3 }}</h3>
                {%- endif -%}
              </div>

          </div>
    </div>
  </div>
  <!-- Right Side -->
  {%- if image -%}
  <div class="rkwo-product-callouts-image" style="background-image: url({{ image | img_url: '1000x1000' }});"></div>
  {%- endif -%}
</section>
{%- endif -%}

<style>
  .rkwo-product-callouts {
    margin: 40px;
    border-radius: 40px;
    overflow: hidden;
    display: table;
    background-color: #ecebe8;
  }
  .rkwo-product-callouts-image,
  .rkwo-product-callouts-content {
    width: 50%;
    display: table-cell !important;
    vertical-align: top;
  }
  .rkwo-product-callouts-content {
    padding: 100px 50px 100px 200px;
    text-align: center;
  }
  .rkwo-product-callouts-image {
    height: 100%;
    background-size: cover;
    background-position: center;
  }
  .rkwo-product-callouts-content-heading {
    text-align: center;
  }
  .rkwo-product-callouts-point h3 {
    font-size: 4em;
    font-style: italic;
  }

  section[class^=rkwo-] .rkwo-product-callouts-point h3 {
    font-weight: 500 !important;
    margin: 0 0 25px 0;
  }
  .rkwo-product-callouts-point > .rkwo-product-callouts-point-content {
    border-bottom: 1px solid #666;
    padding-bottom: 15px;
  }

  @media (max-width: 1700px) {
    .rkwo-product-callouts-content {
      padding: 75px 50px 75px 100px;
    }
  }

  @media (max-width: 1024px) {
    .rkwo-product-callouts,
    .rkwo-product-callouts-image,
    .rkwo-product-callouts-content {
      display: block !important;
      width: 100%;
    }
    .rkwo-product-callouts {
      display: flex !important;
      flex-direction: column-reverse;
    }
    .rkwo-product-callouts-image {
      min-height: 400px;
    }
    .rkwo-product-callouts-content h2 {
      margin-top: 0;
    }
  }

  @media (max-width: 768px) {
    .rkwo-product-callouts {
      margin: 40px 0;
    }
    .rkwo-product-callouts-image {
      min-height: 300px;
    }
    .rkwo-product-callouts-content {
      padding: 35px;
    }
    .rkwo-product-callouts-point h3 {
      font-size: 3em;
    }
  }

  @media (max-width: 480px) {
    .rkwo-product-callouts-image {
      min-height: 250px;
    }
    .rkwo-product-callouts-content {
      padding: 35px 25px;
    }
    .rkwo-product-callouts-point h3 {
      font-size: 2.5em;
      margin-bottom: 15px;
    }
  }
</style>

{% schema %}
{
  "name": "RKWO Product Callouts",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading",
      "default": "Heading"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Section Image",
      "info": "Upload an image"
    }
  ],
  "presets": [
    {
      "name": "RKWO Product Callouts"
    }
  ]
}
{% endschema %}