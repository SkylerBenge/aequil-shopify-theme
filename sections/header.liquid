<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">

{%- if section.settings.menu_type_desktop == 'mega' -%}
  <link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

<style>
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: {{ section.settings.padding_top }}px 3rem {{ section.settings.padding_bottom }}px 3rem;
  }

  .header__heading-link {
    display: flex;
    align-items: center;
  }

  .header__icons {
    display: flex;
    align-items: center;
    gap: 1.2rem;
  }

  .header__cart-count {
    margin-left: 0.3rem;
  }

  /* Hide desktop menu on mobile/tablet */
  @media screen and (max-width: 989px) {
    .header__inline-menu {
      display: none;
    }
  }

  /* Hide mobile menu on desktop */
  @media screen and (min-width: 990px) {
    .header__icon--menu,
    header-drawer {
      display: none;
    }
  }

  /* Mobile menu positioning */
  header-drawer {
    position: absolute;
    top: 0;
    right: 1.2rem;
    z-index: 10;
  }

  /* Adjust header layout for mobile menu */
  @media screen and (max-width: 989px) {
    .header {
      position: relative;
    }
  }
</style>

<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{%- liquid
  assign header_tag = 'div'
  if section.settings.sticky_header_type != 'none'
    assign header_tag = 'sticky-header'
  endif
-%}

<{{ header_tag }}
  {% if header_tag == 'sticky-header' %}
    data-sticky-type="{{ section.settings.sticky_header_type }}"
  {% endif %}
  class="header-wrapper color-{{ section.settings.color_scheme }} gradient{% if section.settings.show_line_separator %} header-wrapper--border-bottom{% endif %}"
>
  <header class="header header--{{ section.settings.logo_position }} page-width">

    <!-- Logo (Left) -->
    <a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset">
      {%- if settings.logo != blank -%}
        <div class="header__heading-logo-wrapper">
          {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
          {%- assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio -%}
          {% capture sizes %}(max-width: {{ settings.logo_width | times: 2 }}px) 50vw, {{ settings.logo_width }}px{% endcapture %}
          {% capture widths %}{{ settings.logo_width }}, {{ settings.logo_width | times: 1.5 | round }}, {{ settings.logo_width | times: 2 }}{% endcapture %}
          {{
            settings.logo
            | image_url: width: 600
            | image_tag:
              class: 'header__heading-logo motion-reduce',
              widths: widths,
              height: logo_height,
              width: settings.logo_width,
              alt: logo_alt,
              sizes: sizes,
              preload: true
          }}
        </div>
      {%- else -%}
        <span class="h2">{{ shop.name }}</span>
      {%- endif -%}
    </a>

    {% render 'header-mega-menu' %}

    <!-- Mobile Menu Drawer -->
    <header-drawer data-breakpoint="{% if section.settings.menu_type_desktop == 'drawer' %}desktop{% else %}tablet{% endif %}" class="large-up-hide">
      <details id="Details-menu-drawer-container" class="menu-drawer-container">
        <summary
          class="header__icon header__icon--menu header__icon--summary link focus-inset"
          aria-label="{{ 'sections.header.menu' | t }}"
        >
          <span>
            {{- 'icon-hamburger.svg' | inline_asset_content -}}
            {{- 'icon-close.svg' | inline_asset_content -}}
          </span>
        </summary>
        <div id="menu-drawer" class="gradient menu-drawer motion-reduce color-{{ section.settings.menu_color_scheme }}">
          <div class="menu-drawer__inner-container">
            <div class="menu-drawer__navigation-container">
              <nav class="menu-drawer__navigation">
                <ul class="menu-drawer__menu has-submenu list-menu" role="list">
                  {%- for link in section.settings.menu.links -%}
                    <li>
                      {%- if link.links != blank -%}
                        <details id="Details-menu-drawer-menu-item-{{ forloop.index }}">
                          <summary
                            id="HeaderDrawer-{{ link.handle }}"
                            class="menu-drawer__menu-item list-menu__item link link--text focus-inset{% if link.child_active %} menu-drawer__menu-item--active{% endif %}"
                          >
                            {{ link.title | escape }}
                            <span class="svg-wrapper">
                              {{- 'icon-arrow.svg' | inline_asset_content -}}
                            </span>
                            <span class="svg-wrapper">
                              {{- 'icon-caret.svg' | inline_asset_content -}}
                            </span>
                          </summary>
                          <div
                            id="link-{{ link.handle | escape }}"
                            class="menu-drawer__submenu has-submenu gradient motion-reduce"
                            tabindex="-1"
                          >
                            <div class="menu-drawer__inner-submenu">
                              <button class="menu-drawer__close-button link link--text focus-inset" aria-expanded="true">
                                <span class="svg-wrapper">
                                  {{- 'icon-arrow.svg' | inline_asset_content -}}
                                </span>
                                {{ link.title | escape }}
                              </button>
                              <ul class="menu-drawer__menu list-menu" role="list" tabindex="-1">
                                {%- for childlink in link.links -%}
                                  <li>
                                    {%- if childlink.links == blank -%}
                                      <a
                                        id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                        href="{{ childlink.url }}"
                                        class="menu-drawer__menu-item link link--text list-menu__item focus-inset{% if childlink.current %} menu-drawer__menu-item--active{% endif %}"
                                        {% if childlink.current %}
                                          aria-current="page"
                                        {% endif %}
                                      >
                                        {{ childlink.title | escape }}
                                      </a>
                                    {%- else -%}
                                      <details id="Details-menu-drawer-{{ link.handle }}-{{ childlink.handle }}">
                                        <summary
                                          id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                          class="menu-drawer__menu-item link link--text list-menu__item focus-inset"
                                        >
                                          {{ childlink.title | escape }}
                                          <span class="svg-wrapper">
                                            {{- 'icon-arrow.svg' | inline_asset_content -}}
                                          </span>
                                          <span class="svg-wrapper">
                                            {{- 'icon-caret.svg' | inline_asset_content -}}
                                          </span>
                                        </summary>
                                        <div
                                          id="childlink-{{ childlink.handle | escape }}"
                                          class="menu-drawer__submenu has-submenu gradient motion-reduce"
                                        >
                                          <button
                                            class="menu-drawer__close-button link link--text focus-inset"
                                            aria-expanded="true"
                                          >
                                            <span class="svg-wrapper">
                                              {{- 'icon-arrow.svg' | inline_asset_content -}}
                                            </span>
                                            {{ childlink.title | escape }}
                                          </button>
                                          <ul
                                            class="menu-drawer__menu list-menu"
                                            role="list"
                                            tabindex="-1"
                                          >
                                            {%- for grandchildlink in childlink.links -%}
                                              <li>
                                                <a
                                                  id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ grandchildlink.handle }}"
                                                  href="{{ grandchildlink.url }}"
                                                  class="menu-drawer__menu-item link link--text list-menu__item focus-inset{% if grandchildlink.current %} menu-drawer__menu-item--active{% endif %}"
                                                  {% if grandchildlink.current %}
                                                    aria-current="page"
                                                  {% endif %}
                                                >
                                                  {{ grandchildlink.title | escape }}
                                                </a>
                                              </li>
                                            {%- endfor -%}
                                          </ul>
                                        </div>
                                      </details>
                                    {%- endif -%}
                                  </li>
                                {%- endfor -%}
                              </ul>
                            </div>
                          </div>
                        </details>
                      {%- else -%}
                        <a
                          id="HeaderDrawer-{{ link.handle }}"
                          href="{{ link.url }}"
                          class="menu-drawer__menu-item list-menu__item link link--text focus-inset{% if link.current %} menu-drawer__menu-item--active{% endif %}"
                          {% if link.current %}
                            aria-current="page"
                          {% endif %}
                        >
                          {{ link.title | escape }}
                        </a>
                      {%- endif -%}
                    </li>
                  {%- endfor -%}
                </ul>
              </nav>
              <div class="menu-drawer__utility-links">
                {%- if shop.customer_accounts_enabled -%}
                  <a
                    href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
                    class="menu-drawer__account link focus-inset h5 medium-hide large-up-hide"
                    rel="nofollow"
                  >
                    {%- if section.settings.enable_customer_avatar -%}
                      <account-icon>
                        {%- if customer and customer.has_avatar? -%}
                          {{ customer | avatar }}
                        {%- else -%}
                          <span class="svg-wrapper">
                            {{- 'icon-account.svg' | inline_asset_content -}}
                          </span>
                        {%- endif -%}
                      </account-icon>
                    {%- else -%}
                      <span class="svg-wrapper">
                        {{- 'icon-account.svg' | inline_asset_content -}}
                      </span>
                    {%- endif -%}
                    {%- liquid
                      if customer
                        echo 'customer.account_fallback' | t
                      else
                        echo 'customer.log_in' | t
                      endif
                    -%}
                  </a>
                {%- endif -%}
                {%- if localization.available_countries or localization.available_languages -%}
                  <div class="menu-drawer__localization header-localization">
                    {%- if localization.available_countries and localization.available_countries.size > 1 -%}
                      <localization-form>
                        {%- form 'localization', id: 'HeaderCountryMobileForm', class: 'localization-form' -%}
                          <div>
                            <h2 class="visually-hidden" id="HeaderCountryMobileLabel">
                              {{ 'localization.country_label' | t }}
                            </h2>
                            {%- render 'country-localization', localPosition: 'HeaderCountryMobile' -%}
                          </div>
                        {%- endform -%}
                      </localization-form>
                    {% endif %}

                    {%- if localization.available_languages and localization.available_languages.size > 1 -%}
                      <localization-form>
                        {%- form 'localization', id: 'HeaderLanguageMobileForm', class: 'localization-form' -%}
                          <div>
                            <h2 class="visually-hidden" id="HeaderLanguageMobileLabel">
                              {{ 'localization.language_label' | t }}
                            </h2>
                            {%- render 'language-localization', localPosition: 'HeaderLanguageMobile' -%}
                          </div>
                        {%- endform -%}
                      </localization-form>
                    {%- endif -%}
                  </div>
                {%- endif -%}
                <ul class="list list-social list-unstyled" role="list">
                  {%- if settings.social_twitter_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_twitter_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-twitter.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.twitter' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_facebook_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_facebook_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-facebook.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.facebook' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_pinterest_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_pinterest_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-pinterest.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.pinterest' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_instagram_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_instagram_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-instagram.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.instagram' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_tiktok_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_tiktok_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-tiktok.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.tiktok' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_tumblr_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_tumblr_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-tumblr.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.tumblr' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_snapchat_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_snapchat_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-snapchat.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.snapchat' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_youtube_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_youtube_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-youtube.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.youtube' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                  {%- if settings.social_vimeo_link != blank -%}
                    <li class="list-social__item">
                      <a href="{{ settings.social_vimeo_link }}" class="list-social__link link">
                        <span class="svg-wrapper">
                          {{- 'icon-vimeo.svg' | inline_asset_content -}}
                        </span>
                        <span class="visually-hidden">{{ 'general.social.links.vimeo' | t }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                </ul>
              </div>
            </div>
          </div>
        </div>
      </details>
    </header-drawer>
    
    <!-- Icons (Right) -->
    <div class="header__icons">
      <!-- Cart Icon -->
      <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart link focus-inset">
        <span class="visually-hidden">{{ 'templates.cart.cart' | t }}</span>
        <svg class="icon icon-cart" aria-hidden="true" focusable="false" viewBox="0 0 20 20">
          <use xlink:href="#icon-cart" />
        </svg>
        <span class="header__cart-count">{{ cart.item_count }}</span>
      </a>
    </div>

  </header>
</{{ header_tag }}>
{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "select",
      "id": "menu_type_desktop",
      "label": "Desktop menu type",
      "options": [
        {
          "value": "dropdown",
          "label": "Dropdown"
        },
        {
          "value": "mega",
          "label": "Mega menu"
        },
        {
          "value": "drawer",
          "label": "Drawer"
        }
      ],
      "default": "mega"
    },
    {
      "type": "color_scheme",
      "id": "menu_color_scheme",
      "label": "Menu color scheme",
      "default": "scheme-1"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Header color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "enable_customer_avatar",
      "label": "Enable customer avatar",
      "default": false
    },
    {
      "type": "select",
      "id": "sticky_header_type",
      "label": "Sticky header",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "on-scroll-up",
          "label": "On scroll up"
        },
        {
          "value": "always",
          "label": "Always"
        }
      ],
      "default": "on-scroll-up"
    },
    {
      "type": "checkbox",
      "id": "show_line_separator",
      "label": "Show line separator",
      "default": true
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo position",
      "options": [
        {
          "value": "top-left",
          "label": "Top left"
        },
        {
          "value": "top-center",
          "label": "Top center"
        },
        {
          "value": "middle-left",
          "label": "Middle left"
        },
        {
          "value": "middle-center",
          "label": "Middle center"
        }
      ],
      "default": "middle-left"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 36,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 20
    }
  ]
}
{% endschema %}